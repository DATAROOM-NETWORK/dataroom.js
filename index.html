<!DOCTYPE html>
<html lang="en">
<head>
  <!-- Meta tags, Title, and Fonts -->
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>dataroom.js Demo</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Fira+Code:wght@300;400;500&family=Roboto:wght@300;400;500&display=swap" rel="stylesheet">

  <!-- highlight.js Stylesheet (Atom One Dark Theme) -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/github-dark.min.css">
  <script src="https://lnsy-dev.github.io/simple-github-icon/github-icon.min.js"></script>


  <!-- Page Styles -->
  <style>

    @import url('https://fonts.googleapis.com/css2?family=Fira+Code:wght@300..700&display=swap');


:root {
      --bg-color: #0f172a;
    --fg-color: #f8fafc;
    --highlight-color: #FE7400;
    --secondary-color: #1e293b;
    --trinary-color: #475569;
    --quaternary-color: #334155;
    --confirmation-color: #3b82f6;
    --notification-color: #94a3b8;
    --inactive-color: #475569;
    --warning-color: #f59e0b;
    --error-color: #ff6b6b;
    --neutral-color: #1e293b;
    --accent-h: 217;
    --accent-s: 91%;
    --accent-l: 60%;
    --text-on-accent: white;
    --slider-track-background: var(--neutral-color);
    --slider-thumb-border-color: var(--fg-color);
    --toggle-thumb-color: var(--fg-color);
    --background-primary: var(--bg-color);
    --background-secondary: var(--bg-color);
    --background-primary-alt: var(--secondary-color);
    --background-secondary-alt: var(--secondary-color);
    --background-modifier-hover: var(--highlight-color);
    --background-modifier-active: var(--trinary-color);
    --background-modifier-border: var(--quaternary-color);
    --dropdown-background: var(--secondary-color);
    --interactive-normal: var(--secondary-color);
    --text-normal: var(--fg-color);
    --h1-color: var(--fg-color);
    --h2-color: var(--fg-color);
    --h3-color: var(--fg-color);
    --h4-color: var(--fg-color);
    --h5-color: var(--fg-color);
    --h6-color: var(--fg-color);
    --bold-color: var(--fg-color);
    --code-normal: var(--fg-color);
    --code-comment: var(--notification-color);
    --code-background: var(--secondary-color);
    --hr-color: var(--inactive-color);
    --text-muted: var(--notification-color);
    --list-marker-color: var(--notification-color);
    --font-text-theme: "Fira Code";
    --font-interface-theme: "Fira Code";
    --font-monospace-theme: "Fira Code";
    --font-logo-theme: "Fira Sans Condensed";
    --line-height-normal: 2;
    --p-spacing: 2.25rem;
    --h1-size: 1.875rem;
    --h1-line-height: 2.25rem;
    --h2-size: 1.5em;
    --h2-line-height: 1.3333333;
    --h3-size: 1.25em;
    --h3-line-height: 1.6;
    --h1-weight: 500;
    --h2-weight: 500;
    --h3-weight: 500;
    --text-selection: var(--inactive-color);
    --link-decoration: none;
    --link-external-decoration: none;
    --text-shadow: none;
    --border-radius: 4px;
    --font-size: 1em;
    --article-width: 40rem;

}

    body {
  font-family: "Fira Code", monospace;
      background-color: var(--bg-color);
      color: var(--fg-color); /* Contrasting light foreground color */
      line-height: 1.6;
    }
    main {
      max-width: 60em;
      margin: 4em auto;
      padding: 2em;
      background-color: var(--bg-color);
    }

    h1, h2, h3, h4, h5, h6 {
    color: var(--h1-color);
    font-size: var(--font-size);
    font-family: var(--font-interface-theme), monospace;
    font-style: italic;
    font-weight: 400;
    }

    article {

    }

    article:last-child {

    }
   
    button {
      font-family: "Fira Code", monospace;
      margin-right: 1em;
      padding: 0.6em 1em;
      border: 1px solid var(--neutral-color);
      background-color: transparent;
      color: var(--fg-color);
      cursor: pointer;
      transition: background-color 0.3s, color 0.3s;
    }

    pre code.hljs {
      font-family: "Fira Code", monospace;
    }


    github-icon {
      width: 2em;
      height: 2em;
      position: fixed;
      right: 1em;
      top: 1em;
    }
  </style>
</head>
<body>

  <github-icon light href="https://github.com/DATAROOM-NETWORK/dataroom.js"></github-icon>


  <main>
    <h1>dataroom.js</h1>
    <p>Dataroom.js extends the CustomHTML Element API with a few custom features for ease of use. </p>
    <p><i>It's like React, but cooler!</i></p>
    <p>Install dataroom.js from NPM:</p>

    <article>
      <pre class="shell">
npm install dataroom-js
      </pre>
    </article>

    <!-- ====================================================================== -->
    <!-- Article 1: Extending DataroomElement                                   -->
    <!-- ====================================================================== -->
    <article>
      <h2>1. Extending DataroomElement</h2>
      <p>Create your own components by extending the base class. Override lifecycle methods like <code>initialize()</code> and <code>disconnect()</code> to add your own logic.</p>
      <h3>Code Example:</h3>
      <pre><code class="language-javascript">
// 1. Import the base class
import DataroomElement from 'dataroom-js';

// you can also use a CDN:
// import DataroomElement from 'https://unpkg.com/dataroom-js@0.7.5/src/index.js';

// 2. Create your own class that extends it
class ExtendingExample extends DataroomElement {
  // 3. Override initialize() for setup logic
  async initialize() {
    this.log('Component is initializing!');
    this.innerHTML = 'Hello from the initialize() method!';
  }

  // 4. Override disconnect() for cleanup logic
  async disconnect() {
    // This won't be visible on the page, but will fire if the element is removed
    console.log('Component is disconnecting!');
  }
}

// 5. Define the new custom element
customElements.define('extending-example', ExtendingExample);
      </code></pre>
      <h3>Live Demo:</h3>
      <div class="demo-box">
        <extending-example></extending-example>
      </div>
      <script type="module">
        import DataroomElement from './src/index.js';
        class ExtendingExample extends DataroomElement {
          async initialize() { this.innerHTML = 'Hello from the initialize() method!'; }
          async disconnect() { console.log('Component is disconnecting!'); }
        }
        customElements.define('extending-example', ExtendingExample);
      </script>
    </article>

    <!-- ====================================================================== -->
    <!-- Article 2: this.create()                                               -->
    <!-- ====================================================================== -->
    <article>
      <h2>2. this.create()</h2>
      <p>Dynamically create and append HTML elements within your component.</p>
      <h3>Code Example:</h3>
      <pre><code class="language-javascript">
import DataroomElement from './src/index.js';

class CreateExample extends DataroomElement {
  async initialize() {
    const list = this.create('ul', { style: 'padding-left: 20px;' });
    this.create('li', { content: 'First item' }, list);
    this.create('li', { content: 'Second item' }, list);
  }
}
customElements.define('create-example', CreateExample);
      </code></pre>
      <h3>Live Demo:</h3>
      <div class="demo-box">
        <create-example></create-example>
      </div>
      <script type="module">
        import DataroomElement from './src/index.js';
        class CreateExample extends DataroomElement {
          async initialize() {
            const list = this.create('ul', { style: 'padding-left: 20px; margin: 0;' });
            this.create('li', { content: 'First item, created dynamically.' }, list);
            this.create('li', { content: 'Second item, also created dynamically.' }, list);
          }
        }
        customElements.define('create-example', CreateExample);
      </script>
    </article>

    <!-- ====================================================================== -->
    <!-- Article 3: this.event(), this.on(), and this.once()                    -->
    <!-- ====================================================================== -->
    <article>
      <h2>3. this.event(), this.on(), and this.once()</h2>
      <p>Fire and listen for custom events within your component. <code>once</code> is a variation of <code>on</code> that only fires the event once.</p>
      <h3>Code Example:</h3>
      <pre><code class="language-javascript">
import DataroomElement from './src/index.js';

class EventExample extends DataroomElement {
  async initialize() {
    const onBtn = this.create('button', { content: 'Click Me (on)' });
    onBtn.addEventListener('click', () => {
      this.event('user-clicked', { time: new Date().toLocaleTimeString() });
    });

    this.on('user-clicked', (detail) => {
      alert(`'user-clicked' event caught at ${detail.time}!`);
    });

    const onceBtn = this.create('button', { content: 'Click Me (once)' });
    const status = this.create('p', { content: 'Waiting for one-time event...' });
    onceBtn.addEventListener('click', () => {
      this.event('one-time-event', { time: new Date().toLocaleTimeString() });
    });

    this.once('one-time-event', (detail) => {
      status.textContent = `'one-time-event' caught at ${detail.time}. It won\'t fire again.`;
      onceBtn.disabled = true;
    });
  }
}
customElements.define('event-example', EventExample);
      </code></pre>
      <h3>Live Demo:</h3>
      <div class="demo-box">
        <event-example></event-example>
      </div>
      <script type="module">
        import DataroomElement from './src/index.js';
        class EventExample extends DataroomElement {
          async initialize() {
            const onBtn = this.create('button', { content: 'Click Me (on)' });
            onBtn.addEventListener('click', () => {
              this.event('user-clicked', { time: new Date().toLocaleTimeString() });
            });

            this.on('user-clicked', (detail) => {
              alert(`'user-clicked' event caught at ${detail.time}!`);
            });

            const onceBtn = this.create('button', { content: 'Click Me (once)' });
            const status = this.create('p', { content: 'Waiting for one-time event...' });
            onceBtn.addEventListener('click', () => {
              this.event('one-time-event', { time: new Date().toLocaleTimeString() });
            });

            this.once('one-time-event', (detail) => {
              status.textContent = `'one-time-event' caught at ${detail.time}. It won\'t fire again.`;
              onceBtn.disabled = true;
              onceBtn.style.cursor = 'not-allowed';
            });
          }
        }
        customElements.define('event-example', EventExample);
      </script>
    </article>

    <!-- ====================================================================== -->
    <!-- Article 4: this.call()                                                 -->
    <!-- ====================================================================== -->
    <article>
      <h2>4. this.call()</h2>
      <p>A built-in helper for making <code>fetch</code> requests. This example fetches a todo item from a public API.</p>
      <h3>Code Example:</h3>
      <pre><code class="language-javascript">
import DataroomElement from './src/index.js';

class CallExample extends DataroomElement {
  async initialize() {
    const btn = this.create('button', { content: 'Fetch Data' });
    const resultEl = this.create('p', { content: 'Waiting for data...' });

    btn.addEventListener('click', async () => {
      resultEl.textContent = 'Loading...';
      try {
        const data = await this.call('https://jsonplaceholder.typicode.com/todos/1');
        resultEl.textContent = `Fetched: "${data.title}"`;
      } catch (e) {
        resultEl.textContent = `Error: ${e.message}`;
      }
    });
  }
}
customElements.define('call-example', CallExample);
      </code></pre>
      <h3>Live Demo:</h3>
      <div class="demo-box">
        <call-example></call-example>
      </div>
      <script type="module">
        import DataroomElement from './src/index.js';
        class CallExample extends DataroomElement {
          async initialize() {
            const btn = this.create('button', { content: 'Fetch Data' });
            const resultEl = this.create('p', { content: 'Click the button to fetch data.' });
            btn.addEventListener('click', async () => {
              resultEl.textContent = 'Loading...';
              try {
                const data = await this.call('https://jsonplaceholder.typicode.com/todos/1');
                resultEl.textContent = `Fetched To-Do: "${data.title}"`;
              } catch (e) {
                resultEl.textContent = `Error: ${e.message}`;
              }
            });
          }
        }
        customElements.define('call-example', CallExample);
      </script>
    </article>

    <!-- ====================================================================== -->
    <!-- Article 5: this.getJSON()                                              -->
    <!-- ====================================================================== -->
    <article>
      <h2>5. this.getJSON()</h2>
      <p>A utility for fetching and parsing a JSON file from a URL. It provides detailed error handling for common issues like network failures or malformed JSON.</p>
      <h3>Code Example:</h3>
      <pre><code class="language-javascript">
import DataroomElement from './src/index.js';

class GetJsonExample extends DataroomElement {
  async initialize() {
    const btn = this.create('button', { content: 'Fetch JSON Data' });
    const resultEl = this.create('p', { content: 'Click the button to fetch.' });

    // Create a dummy JSON file for the demo
    const jsonData = { user: "Jane Doe", role: "Developer" };
    const jsonBlob = new Blob([JSON.stringify(jsonData)], { type: 'application/json' });
    const jsonUrl = URL.createObjectURL(jsonBlob);

    btn.addEventListener('click', async () => {
      resultEl.textContent = 'Loading...';
      try {
        const data = await this.getJSON(jsonUrl);
        resultEl.textContent = `Fetched: User \"${data.user}\" has role \"${data.role}\".`;
      } catch (e) {
        resultEl.textContent = `Error: ${e.message}`;
      }
    });
  }
}
customElements.define('get-json-example', GetJsonExample);
      </code></pre>
      <h3>Live Demo:</h3>
      <div class="demo-box">
        <get-json-example></get-json-example>
      </div>
      <script type="module">
        import DataroomElement from './src/index.js';
        class GetJsonExample extends DataroomElement {
          async initialize() {
            const btn = this.create('button', { content: 'Fetch JSON Data' });
            const resultEl = this.create('p', { content: 'Click the button to fetch data.' });

            // Create a dummy JSON file for the demo
            const jsonData = { user: "Jane Doe", role: "Developer" };
            const jsonBlob = new Blob([JSON.stringify(jsonData, null, 2)], { type: 'application/json' });
            const jsonUrl = URL.createObjectURL(jsonBlob);

            btn.addEventListener('click', async () => {
              resultEl.textContent = 'Loading...';
              try {
                const data = await this.getJSON(jsonUrl);
                resultEl.textContent = `Fetched: User \"${data.user}\" has role \"${data.role}\".`;
              } catch (e) {
                resultEl.textContent = `Error: ${e.message}`;
              }
            });
          }
        }
        customElements.define('get-json-example', GetJsonExample);
      </script>
    </article>

    <!-- ====================================================================== -->
    <!-- Article 6: Attribute Observation                                       -->
    <!-- ====================================================================== -->
    <article>
      <h2>6. Attribute Observation</h2>
      <p>Components automatically listen for attribute changes and fire a <code>NODE-CHANGED</code> event. Click the button to change the <code>data-id</code> attribute on the component below.</p>
      <h3>Code Example:</h3>
      <pre><code class="language-javascript">
import DataroomElement from './src/index.js';

class AttributeExample extends DataroomElement {
  async initialize() {
    this.on('NODE-CHANGED', (detail) => {
      if (detail.attribute === 'data-id') {
        this.textContent = `Attribute 'data-id' changed to: ${detail.newValue}`;
      }
    });
  }
}
customElements.define('attribute-example', AttributeExample);
      </code></pre>
      <h3>Live Demo:</h3>
      <div class="demo-box">
        <button id="attr-change-btn">Change Attribute</button>
        <attribute-example data-id="initial-value">
          I'm waiting for an attribute change...
        </attribute-example>
      </div>
      <script type="module">
        import DataroomElement from './src/index.js';
        class AttributeExample extends DataroomElement {
          async initialize() {
            this.on('NODE-CHANGED', (detail) => {
              if (detail.attribute === 'data-id') {
                this.textContent = `Attribute 'data-id' changed to: "${detail.newValue}"`;
              }
            });
          }
        }
        customElements.define('attribute-example', AttributeExample);

        // External button to trigger the change
        document.getElementById('attr-change-btn').addEventListener('click', () => {
          const target = document.querySelector('attribute-example');
          const newId = `val-${Math.floor(Math.random() * 1000)}`;
          target.setAttribute('data-id', newId);
        });
      </script>
    </article>

  </main>

  <!-- highlight.js Script -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
  <script>
    // Initialize highlighting on all code blocks
    hljs.highlightAll();
  </script>

</body>
</html>